___TERMS_OF_SERVICE___

By creating or modifying this file you agree to Google Tag Manager's Community
Template Gallery Developer Terms of Service available at
https://developers.google.com/tag-manager/gallery-tos (or such other URL as
Google may provide), as modified from time to time.


___INFO___

{
  "type": "TAG",
  "id": "cvt_temp_public_id",
  "version": 1,
  "securityGroups": [],
  "displayName": "mFilterit Visit Tag - Santosh",
  "categories": ["ANALYTICS", "ATTRIBUTION"],
  "brand": {
    "id": "brand_dummy",
    "displayName": "",
    "thumbnail": "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAHgAAAB7CAIAAAAwktMrAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAAFiUAABYlAUlSJPAAAA4WSURBVHhe7Z0JcBRVGoD/152bmBBERI4VWQtcChE5FLTA8mB1QVxWENSlwiICAlqosLWKgstaCxYWCModRAhEZYOcgoKEGwK6AQNEAQMuhCuUkASSkKvfv//reWiATKZnprunB/qrVJj3yPTx9d//O3qmmyEiOAMsytey0tn3K3nudlZRBkzW1wxtNQI2ac1ad1fv68tuby/rnUpoRKNWCWUXgTE8upsv/TvuPQARAApAFEAkMHpdu2UPtOEaYBVABQD95gANIpSn32NdBzPUQI1m0XHyLx2AfaLFakhu4SmMiOar/okrFgqt5DTGsNnaoRVwwDLdOy2vVSsh/baWEJMAiQ2DX3yQ2CGaTnHIy8byEtw6l29IhUpdbrQZcr1Bq6QY16Wze+9VerwFcfXYXQ+HULe1osWiT+XwPctwwzQ8cQ5igVEUU4qwjV+NV4E6MgViE1iHviHRbaFofiQTc9bh3mWYsx/q6PkhhJDxEvGv8sIUyt2s61CbdVsiGvOy+eZZeGgz/nRIRHGkrA89Ht3RoPzxZdakjWg25X9YjsmiaVl8xl/wl5/xx2yhOLRR7A1qMy8BS4xmHfuxDs+wNk/aoNtM0dqnr+CJbNyzTbR1zoliL1APUDSVDW4h3coTb7KkRvI/rMEc0Zj/k7Z4GORkUMsjmrsQtu5+QZlEA0aNc0J9ZdAipfUTst4CTBCtLXkNt83F4lJQaQgSPpYvIwRQj5OBOnan8vvOstZsghXN107UvhhDWY+p4ae4OqIXSNHd9a8RLy6WVaYSlOiq1CG4OgUSwjKQrwVpEE+jylKI/MKEdHoVAYrm547zBYNw9wZhmcrhb9mDkEE/x0D96pISGSNrzSCQURo/sI5P7IR7NrDE6ySWf4V2h9pG1gy0PrH84CYTA9vviOaZi/i8ZNm7uI7R+9pK/wnKYyNZlAmzgP6J1jbP4nOHi24yNX3XPZro/CmPDlF7T4Q69WRloPghmq+fon08isXbOysUUkQvmxw92F/pO4XddIusDQijzrQbzzJBJy6FIc9czFeMxdIiWRsQhrRpOz7hi244yx5EkqR8vX0e3zAVNepsB4hvc1ruDp42wpyLIOGJiOsKja+dgNmrZZX/+BaNacOh9BINr29Y0YSIs5IKXPc+Fp2SVX7iozHUZvTi364UF0y9WxYLKNYvj4YpscAMDE1oN4WD+JvV0RtZkzaeSuPUJrpq/gDckgoR+vyWF+jdSgWwSQdZw5ZYWSZrwwWmsIgoXDVOS3/XoGugzvVD/ZT+c1hcoqw1hlfReGiTNrc/nj9V+2yReHclsDvbqW9sh8hYWRs+YOYi7YNkOV1jALG/haBO2qU0v19WGaPmWKWlaV9NwjM+LBNi+yIB9+3h2z8RZXonbUtY/FBv4tslfLIflgnxl3VBG9EJzx6RVcaoWTSfn4yZXzMKUANbQOtmdYFPHoHHs8OmwaSNPp2DS0djvB+WPYi/vxW0j7rLsjFqEM1zd+LR3UDje3+2gN0G2pC2eDbX7w23HyYSJt88B/NOBHbJjd6FPxzmOetl2QBX52isKOWpQ3hGmhie+IkYsHJQ55VDRJTn3HQiehzwb6bwWaPYzZ6qgKD0cxoi1qDBsLo6onn2l3xHGgtouoo6J+Saf9zfU9J/OxHcmYozR0GQ00S0f0mgpY2QRV9cIRoLT+KuRaJHXHPq9gUl62jg29NptOpQzxTOBXl83gBMMiHDUY8Ql87E0kJZrpUrRZ/Yhzu+FJ+KCxhyHQl88Wu4NcWZyZpP/zNSf9Ssad4E0Gb2lq9r5TfReP44X/Nv8QnPIP3QIhnw/7yOP3zjLNeMaXOf4wf2GhmbGIKiKgJw/0Ze4HtcXi2iSwsxa4cJ101o9SpgSTGunQhVNGp0hmvG+JJXcfPn7CZZYQ60c9QyzX5GFr0jRVOi4SvGglkfpdVXz3M28WVvyhoHIIZUwWTFGtF18VM5PvtYlyO6vJhvXWXidojpEXL95RS++t3QBzWF84xeUHzB50A3AMQyi4u0D7rJshcuR/SPm+TnjMxDuI4AvmIcbpkZStc0PPluiRhcWLcJFM+FPtK0EI2XLmrvJbM6nhozEUf7EsCFX/RCKFzTSrVKvvxtKL4kDrwVm+Bpk84d1zyzPV7QI1orN6Gz4Y044GnviJ61wF7X+qHVJnXFY7nWfpODLBYV47Y5slgTQjRP/wdYNsFJO4vUsV8/GY5k2uqZMgbt2oxeuH+XmB2zGhKpRNTSJOqiV8wPapDiCzEFc+IE3/gRlpfalUDEWjDjI75/reg1W79O0aHOy+abZsryNeipw/oLr9QA8PWf4fIxesGG/QY8eQC3pUBppbjaaQMksqBYjNG8oPDv0kWCtoFEwPRpuPpf4rWlrilpFJ3BT1/Gw/stPVOvhlxHelWp8GVvWJegqyOSdV3gS9/B3O2yygrIckUZpg3HrC1iSt0xKJh/VHTCbEHMo1KTsPBF/tVES4Kalll2Eac9jlnLA7h0YimKbZY9sCjA44f4Z2Og5LzJJmhpXMP0UbhnKx1OR1km9MbQXjzzVtr4tnrJVI7v5etTME4flDqM0GyRiOvTeVXjWpkWePpyqsZ1xFo/hRJCQrRR+rUYOPYjn9rdLNe8DxPTNc78CmnIRHtQgR/KwMzUYF3rb+eaWKBjCZ1oCmpaeWkFXzkeSgoDd+1JGj0Y3GzWuWEJIY1oci06IUe1mb1kjb/oarVRDaGB1WPbYAmpaA+UrC/m4/G9gQUkXzMBz+eLTqqzTYdetJiOOXqQpw7BgpP+uaZB4OGtuGqc/lqvcTAOiGiyFAuY81+cn4xF+UZdk+Wfv+Uf9sAyzbE9jeo4QjQhpvf2bcSMaYYunJPlgpNIJ8HFYuffr8KDU0SLc18B3DQDf9oma7wiDgNmTMW8bBsmeM3CMaLJGCXr/Atw4Ywse4MB3zYPN06Xt9oIExy2pbQ5iu9RB57cjwVlYZGafyV8QqI6aqSTB4E1Ep6iwxBXtE24om3CFW0TrmibcEXbhCJuQ+ZiPQpr3MJ1bQOK0ud9cXtlF4tRlLZPee7V7hIUqP9UVcriNeiNIaWOWj5w6mIA5MDqJdZyG1khWuk7QjyDwCUYNIAmdytdh8jiNeiie73rpulgIdFVtaVgPXUoqrgRlps9AgXJclKC2u11Wa4JIZrFJqhvLRX3RXIJAApQkaCbsI79ZE1N6BFNrpvfR7/doA4QstjgTvnaC1I0xCYqj/SDcllyMY7IG/GJ6oiVsuyFyxEdk6B0H0Mdajeo/UPXpTRt5/MS8eWIJuLrK/c95g5e/INEa6AMWyqL3vlNNKvbiD0+mlW6QW0YFE8GYO17sHjfd7OpFtHk+ndtWdfebp/aD4pAHZYuX9fKlaITbmX3P8ei9ccKuPhC3DL9+dEsytCX2q4QTbA2PdmDA6BUFl28Qgn2Aqh935dFX1wjOiKKPfIya9Eavc5DuQjwPKiTt8qCAa4WTSjNOrBmHUWmdltFL2AFsHYdlBZdZNkANYgmlIHz2QM9kBKI6/oaRK/sLKgv+e7SVadm0dT9VnuOZ02biatcrutqCMuFoKYcYPVvl1XGqFk0we5oz+5+XHQVXdGXEZ0x6mn0HMjq/05WGcaraELtP1t5oC9Uua4FJIEpwBo3Vbq9zmL8vqlbbaIJdegSpUVH8RQ613UZsJYPq+P2sEatZY0/+BBNsOQUSEy8wZO1uMtmYhzr9iqLry+r/MS3aKXpPeqAeYyS9Y06XBQTGrHR7KnxrM1Tssp/fIsmlPZ9lEFzxI3VbkDXGkAEo0Gc8vDwgL4IKTEkmlC6DlFfmk09azHPbSmedob2ydsPYcbj2AyhAdI6Hxqm9Bgb5DPgfDyH5Sq0HQtw9kBxqwZrvj8iUmHztpDUFLj3j6mpkXByP+b/bPktXcgyB/XJ0ezJd1iM/zeIvxL/RBM86wst5VkorbLovlBijsVngqIjbbVlDnT6KkNnqV0GiUMbNH6LJnjuDr7gb3gkN4DnAIQH1PLTIHvG96zpPWZ9jTEQ0QQvLuALB+LmlZCof6PSrM0JNUIGnU/HICLD6FMSDGK0MbwKJT4pYsQK1nskXNA3LpCD5ThE/7VcPCgp0mzLRICiPUQ8O1Ud+iEo+qfZw9y12AUN1B4jIxdZsicBpo7qaCvewi1zseAXcUsjioSwSyPU7lELHAnquCzl9nay0mxMEE1gUb6WOhiyV4sZcevukGw6+mVs8RDBpMbKC2nKXQ/JegswR7QHbfnbeCwLM78WTwh0+N0dPDMK1G1v2Jg9MEBMyMUH85gh35gpmqBl8ZTn8dz/cG+mc3Xrz/xm9eqwzslKu97sD4/KeisxWbQHPJuLG6fzw1vxwF6I04eRzkgmIopLxCM5lZ5vskatWKf+tm2XJaI98LxsyFmHe5bx73dDHatG7UahXFEs2g82OEVc6e+cbPOht1C0B4puvm+NeCzu0ZMimdDAPagupZ+QX+pR6J+9UkcuZDfVh7u7h+Tsslw0IVZw+iCWl+DOBXztdLHbMfrzdK3b41/9Ui+ocxflT2+wOvWgeacQJjA7RHsQq6ksg6IzEBXH107gadPEHe9UXTq1mcE7ILmalEsnDbu3k/L0BHZLc4hJYHWS5N+EDvtEV0estKIUmIJnDvPPX8Hd28RxoJRCxj0/RrzTW8gsRS6ZpRcIrPmtrPck0cRVlYEaycyYdTOL0IiumbJiLSud70qDfRmib1B7KqetpoFG85as/dNKl8Gs/h2y3qk4SfR1jZ09gBsaV7RNuKJtwhVtE65om3BF24Qr2iZc0TbhirYJV7RNuKJtAeD/632vSTNWUzoAAAAASUVORK5CYII\u003d"
  },
  "description": "mFilterit Visit Tag - Santosh",
  "containerContexts": [
    "WEB"
  ]
}


___TEMPLATE_PARAMETERS___

[
  {
    "type": "TEXT",
    "name": "mfPackageName",
    "displayName": "",
    "simpleValueType": true,
    "valueValidators": [
      {
        "type": "STRING_LENGTH",
        "args": [
          10,
          30
        ]
      }
    ]
  }
]


___SANDBOXED_JS_FOR_WEB_TEMPLATE___

var setInWindow = require('setInWindow');
var injectScript = require('injectScript');
const log = require('logToConsole');

const mf_package_name = data.mfPackageName;

var _mfilteritSettings = {
  'mf_package_name' : mf_package_name
};

setInWindow('_mfilteritSettings', _mfilteritSettings, false);

//log('data =', data);

//log('Window Logs =', _mfilteritSettings);

// Inject worker script for VISA
injectScript('https://script.mfilterit.net/v3/v/client/web.gtm-test001.cpv.js', data.gtmOnSuccess, data.gtmOnFailure, 'mFilteritTrackerV');

//injectScript('https://static.affilae.com/ae-v3.5.js', data.gtmOnSuccess, data.gtmOnFailure, 'mAeTracker');


___WEB_PERMISSIONS___

[
  {
    "instance": {
      "key": {
        "publicId": "logging",
        "versionId": "1"
      },
      "param": [
        {
          "key": "environments",
          "value": {
            "type": 1,
            "string": "debug"
          }
        }
      ]
    },
    "isRequired": true
  },
  {
    "instance": {
      "key": {
        "publicId": "access_globals",
        "versionId": "1"
      },
      "param": [
        {
          "key": "keys",
          "value": {
            "type": 2,
            "listItem": [
              {
                "type": 3,
                "mapKey": [
                  {
                    "type": 1,
                    "string": "key"
                  },
                  {
                    "type": 1,
                    "string": "read"
                  },
                  {
                    "type": 1,
                    "string": "write"
                  },
                  {
                    "type": 1,
                    "string": "execute"
                  }
                ],
                "mapValue": [
                  {
                    "type": 1,
                    "string": "_mfilteritSettings"
                  },
                  {
                    "type": 8,
                    "boolean": true
                  },
                  {
                    "type": 8,
                    "boolean": true
                  },
                  {
                    "type": 8,
                    "boolean": false
                  }
                ]
              },
              {
                "type": 3,
                "mapKey": [
                  {
                    "type": 1,
                    "string": "key"
                  },
                  {
                    "type": 1,
                    "string": "read"
                  },
                  {
                    "type": 1,
                    "string": "write"
                  },
                  {
                    "type": 1,
                    "string": "execute"
                  }
                ],
                "mapValue": [
                  {
                    "type": 1,
                    "string": "setInWindow"
                  },
                  {
                    "type": 8,
                    "boolean": true
                  },
                  {
                    "type": 8,
                    "boolean": true
                  },
                  {
                    "type": 8,
                    "boolean": false
                  }
                ]
              }
            ]
          }
        }
      ]
    },
    "clientAnnotations": {
      "isEditedByUser": true
    },
    "isRequired": true
  },
  {
    "instance": {
      "key": {
        "publicId": "inject_script",
        "versionId": "1"
      },
      "param": [
        {
          "key": "urls",
          "value": {
            "type": 2,
            "listItem": [
              {
                "type": 1,
                "string": "https://*.mfilterit.net/*"
              }
            ]
          }
        }
      ]
    },
    "clientAnnotations": {
      "isEditedByUser": true
    },
    "isRequired": true
  }
]


___TESTS___

scenarios:
- name: Untitled test 1
  code: |-
    const mockData = {
      "mfPackageName" : "web.test.cpv"
    };

    // Call runCode to run the template's code.
    runCode(mockData);

    // Verify that the tag finished successfully.
    assertApi('gtmOnSuccess').wasCalled();


___NOTES___

Created on 10/01/2023, 17:10:08

